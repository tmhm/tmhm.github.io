<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>C_Cplus程序设计涉及的一些知识点 - fooweel</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="fooweel" /><meta name="description" content="C&#43;&#43;中的一些小知识点（printf压栈顺序，指针引用，动态内存以及变量的存储位置，构造函数，this指针等问题的回顾） " /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.101.0 with theme even" />


<link rel="canonical" href="http://localhost:1313/post/c_cplus_basic0/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="C_Cplus程序设计涉及的一些知识点" />
<meta property="og:description" content="C&#43;&#43;中的一些小知识点（printf压栈顺序，指针引用，动态内存以及变量的存储位置，构造函数，this指针等问题的回顾） " />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/c_cplus_basic0/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2016-08-30T10:47:00+00:00" />
<meta property="article:modified_time" content="2016-08-30T10:47:00+00:00" />

<meta itemprop="name" content="C_Cplus程序设计涉及的一些知识点">
<meta itemprop="description" content="C&#43;&#43;中的一些小知识点（printf压栈顺序，指针引用，动态内存以及变量的存储位置，构造函数，this指针等问题的回顾） "><meta itemprop="datePublished" content="2016-08-30T10:47:00+00:00" />
<meta itemprop="dateModified" content="2016-08-30T10:47:00+00:00" />
<meta itemprop="wordCount" content="2742">
<meta itemprop="keywords" content="C&#43;&#43;,编程基础," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="C_Cplus程序设计涉及的一些知识点"/>
<meta name="twitter:description" content="C&#43;&#43;中的一些小知识点（printf压栈顺序，指针引用，动态内存以及变量的存储位置，构造函数，this指针等问题的回顾） "/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">FooWeel&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">FooWeel&#39;s Blog</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">C_Cplus程序设计涉及的一些知识点</h1>

      <div class="post-meta">
        <span class="post-time"> 2016-08-30 </span>
        <div class="post-category">
            <a href="/categories/%E5%AD%A6%E4%B9%A0/"> 学习 </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li><a href="#c中的printf函数">c中的printf函数</a></li>
            <li><a href="#c和c的关系">c和c++的关系</a></li>
            <li><a href="#指针和引用">指针和引用</a></li>
            <li><a href="#传递动态内存">传递动态内存</a></li>
            <li><a href="#malloc-申请内存">malloc 申请内存</a></li>
            <li><a href="#字符串变量存储问题">字符串变量存储问题</a></li>
            <li><a href="#构造函数">构造函数</a></li>
            <li><a href="#mallocfree-newdelete">malloc/free ＆＆new/delete</a></li>
            <li><a href="#指针和句柄">指针和句柄</a></li>
            <li><a href="#this-指针">this 指针</a></li>
            <li><a href="#和-的优先级">“=”和“&lt;=” 的优先级</a></li>
            <li><a href="#运算操作符">运算操作符</a></li>
            <li><a href="#sizeof操作符与数组">sizeof操作符与数组</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>C++中的一些小知识点。包括：printf压栈顺序，指针引用，动态内存以及变量的存储位置，构造函数，this指针等问题的回顾</p>
<h3 id="c中的printf函数">c中的printf函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">main() {
</span></span><span class="line"><span class="cl">	int b = 3;
</span></span><span class="line"><span class="cl">	int arr[]= {6,7,8,9,10};
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	int * ptr = arr;
</span></span><span class="line"><span class="cl">    *(ptr++) += 123;
</span></span><span class="line"><span class="cl">    printf(&#34;%d,%d\n&#34;,*ptr,*(++ptr));
</span></span><span class="line"><span class="cl">    return 0;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>输出 ：8,8</p>
</blockquote>
<blockquote>
<p>原因：printf函数计算参数是<strong>从右往左压栈的</strong></p>
</blockquote>
<h3 id="c和c的关系">c和c++的关系</h3>
<ul>
<li>c++ 语言支持函数重载，c语言不支持函数重载；</li>
<li>函数在C++编译后在库中的名字和C语言的不同，假设某个函数原型是void foo（int x， int y）。该函数被C编译器编译后，在库中的名字是_foo,而在C++编译器中则会产生像_foo_int_int之类的名字。</li>
<li>C++提供了C连接交换指定符 extern &ldquo;c&rdquo; 解决名字匹配的问题。</li>
</ul>
<h3 id="指针和引用">指针和引用</h3>
<p>区别：</p>
<ul>
<li>非空区别，在任何情况下都不能使用指向空值的引用。一个引用必须总是指向某些对象；</li>
<li>合法性，在使用引用之前不需要测试它的合法性，相反，指针则应该总是被测试，防止其为空；</li>
<li>可修改区别，指针可被重新赋值以指向另一个不同对象。但是引用则总是指向在初始化被指定的对象，以后不能改变，但是指向的对象的其内容可以改变</li>
<li>应用区别，有存在不指向任何对象的可能和不同时刻会指向不同的对象等情况时，使用指针；如果总是指向一个对象并且指向一个对象以后就不会改变指向，那么应该使用引用。</li>
</ul>
<h3 id="传递动态内存">传递动态内存</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">void swap3(int *p, int *q) {
</span></span><span class="line"><span class="cl">	int *tmp;
</span></span><span class="line"><span class="cl">    tmp = p;
</span></span><span class="line"><span class="cl">    p = q;
</span></span><span class="line"><span class="cl">    q = tmp;//仅仅交换了指针的值，并没有改变两块内存的值
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">void swap4(int *p, int *q) {
</span></span><span class="line"><span class="cl">	int tmp;
</span></span><span class="line"><span class="cl">    tmp = *p;  //获取p指向内存的值
</span></span><span class="line"><span class="cl">    *p = *q;
</span></span><span class="line"><span class="cl">    *q = tmp;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">void swap5(int &amp;p, int &amp;q) {
</span></span><span class="line"><span class="cl">	int tmp;
</span></span><span class="line"><span class="cl">    tmp = p; //获取p指向内存的值
</span></span><span class="line"><span class="cl">    p = q;
</span></span><span class="line"><span class="cl">    q = tmp;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>//&mdash;&mdash;&mdash;&mdash;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">    int t1 = 1,t2 = 2;
</span></span><span class="line"><span class="cl">    cout &lt;&lt; t1 &lt;&lt; &#34;&#34;&lt;&lt; t2 &lt;&lt; endl;
</span></span><span class="line"><span class="cl">    swap3(&amp;t1,&amp;t2); //仅仅交换了指针的值，并没有改变两块内存的值
</span></span><span class="line"><span class="cl">    cout &lt;&lt; t1 &lt;&lt; &#34;&#34;&lt;&lt; t2 &lt;&lt; endl;
</span></span><span class="line"><span class="cl">    // 后面两个函数分别用指针和引用交换成功
</span></span><span class="line"><span class="cl">    swap4(&amp;t1,&amp;t2);
</span></span><span class="line"><span class="cl">    cout &lt;&lt; t1 &lt;&lt; &#34;&#34;&lt;&lt; t2 &lt;&lt; endl;
</span></span><span class="line"><span class="cl">    swap5(t1,t2);
</span></span><span class="line"><span class="cl">    cout &lt;&lt; t1 &lt;&lt; &#34;&#34;&lt;&lt; t2 &lt;&lt; endl;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="malloc-申请内存">malloc 申请内存</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">void getMemory_err(char *p, int num) {
</span></span><span class="line"><span class="cl">p = (char *)malloc(sizeof(char )* num);
</span></span><span class="line"><span class="cl">        // 没有return 指针，不能传递动态内存
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">//返回指针变量
</span></span><span class="line"><span class="cl">char *pGetMemory(char *p, int num) {
</span></span><span class="line"><span class="cl">p = (char *)malloc(sizeof(char )* num);
</span></span><span class="line"><span class="cl">        return p;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// 用指针的指针，
</span></span><span class="line"><span class="cl">void getMemory(char **p, int num) {
</span></span><span class="line"><span class="cl">*p = (char *)malloc(sizeof(char )* num);
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>//&mdash;&mdash;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">char *str = NULL;
</span></span><span class="line"><span class="cl">getMemory(&amp;str,10);
</span></span><span class="line"><span class="cl">strcpy(str,&#34;hello&#34;);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">char *str2 = NULL;
</span></span><span class="line"><span class="cl">str2 = pGetMemory(str2,10);
</span></span><span class="line"><span class="cl">strcpy(str2,&#34;test&#34;);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cout&lt;&lt; *str &lt;&lt;endl;
</span></span><span class="line"><span class="cl">cout&lt;&lt; str &lt;&lt; endl;
</span></span><span class="line"><span class="cl">cout&lt;&lt; &amp;str &lt;&lt; endl;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cout&lt;&lt; *str2 &lt;&lt;endl;
</span></span><span class="line"><span class="cl">cout&lt;&lt; str2 &lt;&lt; endl;
</span></span><span class="line"><span class="cl">cout&lt;&lt; &amp;str2 &lt;&lt; endl;
</span></span></code></pre></td></tr></table>
</div>
</div><p>output:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">    h
</span></span><span class="line"><span class="cl">    hello
</span></span><span class="line"><span class="cl">    012FF774
</span></span><span class="line"><span class="cl">    t
</span></span><span class="line"><span class="cl">    test
</span></span><span class="line"><span class="cl">    012FF768
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="字符串变量存储问题">字符串变量存储问题</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">int a = 0; //全局初始化区
</span></span><span class="line"><span class="cl">char *p1; //全局未初始化区
</span></span><span class="line"><span class="cl">int _tmain(int argc, _TCHAR* argv[]) {
</span></span><span class="line"><span class="cl">int b; //栈
</span></span><span class="line"><span class="cl">char s[] = &#34;abc&#34;; //s在栈上， 常量区会存储一份&#34;abc\0&#34;，用于共享，s[]初始化的时候拷贝过来放到栈上
</span></span><span class="line"><span class="cl">char *p2; //栈
</span></span><span class="line"><span class="cl">char *p3 = &#34;123456&#34;; //123456\0在常量区，p3在栈上。
</span></span><span class="line"><span class="cl">const char *m = &#34;123456&#34;; //m在栈上， “123456” 在常量区
</span></span><span class="line"><span class="cl">static int c =0; //全局（静态）初始化区
</span></span><span class="line"><span class="cl">p1 = (char *)malloc(10);
</span></span><span class="line"><span class="cl">p2 = (char *)malloc(20);
</span></span><span class="line"><span class="cl">//分配得来得10和20字节的区域就在堆区。
</span></span><span class="line"><span class="cl">strcpy(p1, &#34;123456&#34;); //123456\0放在常量区，编译器可能会将它与p3所指向的&#34;123456&#34; 优化成一个地方。
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cout &lt;&lt; (m == p3 ? 1: 0) &lt;&lt; endl;
</span></span><span class="line"><span class="cl">// out 1,
</span></span><span class="line"><span class="cl">cout &lt;&lt; (p1 == p3? 1: 0) &lt;&lt; endl;
</span></span><span class="line"><span class="cl">// out 0;
</span></span><span class="line"><span class="cl">cout &lt;&lt; p1 &lt;&lt; &#34;———&#34; &lt;&lt; p3 &lt;&lt; endl; // out 123456---123456
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">return 0;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>//&mdash;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">char *strA() {
</span></span><span class="line"><span class="cl">	char str[] = &#34;hello world&#34;;
</span></span><span class="line"><span class="cl">    cout &lt;&lt; &#34;in str[] &#34;&lt;&lt;endl;
</span></span><span class="line"><span class="cl">    cout &lt;&lt; &#34;before: &#34;&lt;&lt; str &lt;&lt; endl;
</span></span><span class="line"><span class="cl">    str[0] = &#39;t&#39;;
</span></span><span class="line"><span class="cl">    cout &lt;&lt;&#34;After:&#34; &lt;&lt; str &lt;&lt; endl;
</span></span><span class="line"><span class="cl">    return str;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">char *pStrA_err() {
</span></span><span class="line"><span class="cl">	char *str = &#34;hello world&#34;;
</span></span><span class="line"><span class="cl">    cout &lt;&lt; &#34;in *str &#34;&lt;&lt;endl;
</span></span><span class="line"><span class="cl">    cout &lt;&lt; &#34;before: &#34;&lt;&lt; str &lt;&lt; endl;
</span></span><span class="line"><span class="cl">    //*str = &#39;P&#39;; // !!!!!!------runtime error 字符串常量保存在只读数据段
</span></span><span class="line"><span class="cl">    cout &lt;&lt;&#34;After:&#34; &lt;&lt; str &lt;&lt; endl;
</span></span><span class="line"><span class="cl">    return str;
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">char *pStrA(){
</span></span><span class="line"><span class="cl">    static char *str = &#34;hello world&#34;;
</span></span><span class="line"><span class="cl">    cout &lt;&lt; &#34;in *str &#34;&lt;&lt;endl;
</span></span><span class="line"><span class="cl">    cout &lt;&lt; &#34;before: &#34;&lt;&lt; str &lt;&lt; endl;
</span></span><span class="line"><span class="cl">    //*str = &#39;P&#39;; // !!!!!!------runtime error  ,字符串常量保存在只读数据段
</span></span><span class="line"><span class="cl">    cout &lt;&lt;&#34;After:&#34; &lt;&lt; str &lt;&lt; endl;
</span></span><span class="line"><span class="cl">    return str;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>main:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">char *c = strA();
</span></span><span class="line"><span class="cl">char *c2 = pStrA_err();
</span></span><span class="line"><span class="cl">char *c3 = pStrA();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cout &lt;&lt; &#34;After fun return:&#34; &lt;&lt; &#34;--c:&#34; &lt;&lt; c &lt;&lt; &#34;--c2:&#34; &lt;&lt; c2 &lt;&lt; &#34;--c3&#34; &lt;&lt; c3 &lt;&lt; endl;
</span></span></code></pre></td></tr></table>
</div>
</div><p>output:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">    in str[]
</span></span><span class="line"><span class="cl">    before: hello world
</span></span><span class="line"><span class="cl">    After:tello world
</span></span><span class="line"><span class="cl">    in *str
</span></span><span class="line"><span class="cl">    before: hello world
</span></span><span class="line"><span class="cl">    After:hello world
</span></span><span class="line"><span class="cl">    in *str
</span></span><span class="line"><span class="cl">    before: hello world
</span></span><span class="line"><span class="cl">    After:hello world
</span></span><span class="line"><span class="cl">    After fun return:--c:@?--c2:hello world--c3hello world
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>结论：</strong></p>
<blockquote>
<ul>
<li>字符串数据保存在常量区，只读的数据段，不能直接修改</li>
<li>函数内数组是局部变量，在函数内通过str[0] 可以修改。return之后，局部变量释放，</li>
</ul>
</blockquote>
<h3 id="构造函数">构造函数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">class tA{
</span></span><span class="line"><span class="cl">public:
</span></span><span class="line"><span class="cl">        int _a;
</span></span><span class="line"><span class="cl">        tA(){
</span></span><span class="line"><span class="cl">                _a = 1;
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">        void print(){
</span></span><span class="line"><span class="cl">                printf(&#34;%d&#34;,_a);
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">};
</span></span><span class="line"><span class="cl">class tB :public tA{
</span></span><span class="line"><span class="cl">public:
</span></span><span class="line"><span class="cl">        int _a;
</span></span><span class="line"><span class="cl">        tB(){
</span></span><span class="line"><span class="cl">                _a = 2;
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">};
</span></span></code></pre></td></tr></table>
</div>
</div><p>//&ndash;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">tB b;
</span></span><span class="line"><span class="cl">tB b;
</span></span><span class="line"><span class="cl">b.print(); // 在构造B类之前，先调用A的构造函数，在A类中_a =1,
</span></span><span class="line"><span class="cl">printf(&#34;%d&#34;,b._a); // B类中 _a = 2;
</span></span><span class="line"><span class="cl">return 0;
</span></span><span class="line"><span class="cl">    
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>output:        12</p>
</blockquote>
<blockquote>
<p>在构造B类之前，先调用A的构造函数</p>
</blockquote>
<h3 id="mallocfree-newdelete">malloc/free ＆＆new/delete</h3>
<ul>
<li>malloc/free 是c++/c语言的标准库函数，new/delete是c++的运算符，它们都可以用于申请和释放动态内存</li>
<li>由于malloc/free是库函数而不是运算符，不在编译器控制权限之内，不能执行构造函数和析构函数</li>
<li>c++语言中new运算符， 能完成动态内存分配和初始化工作； delete 运算符完成清理和释放内存工作</li>
</ul>
<h3 id="指针和句柄">指针和句柄</h3>
<ul>
<li>句柄和指针其实是两个截然不同的概念。</li>
<li>windows系统用句柄标记系统资源，隐藏系统的信息，它是一个32bit的uint。</li>
<li>指针则标记某个物理内存的地址</li>
<li>句柄可以看做是指向指针的指针。</li>
</ul>
<h3 id="this-指针">this 指针</h3>
<ul>
<li>本质上是一个函数参数，只是编译器隐藏起形式，语法层面的参数，this指针只能在成员函数中使用，全局函数，静态函数都不能使用this指针。 在python中直接显性给出</li>
<li>this指针在成员函数的开始前构造，在成员的结束后清除</li>
<li>this指针并不占用对象的空间， 只会占用参数传递时的栈空间，或者直接占用一个寄存器</li>
<li>this指针会因编译器不同而有不同的存放位置，可能是堆，栈，也可能是寄存器。</li>
<li>this指针只有在成员函数中才有定义。因此，在获得一个对象后，也不能通过对象使用this指针。所以，我们无法知道一个对象的this指针的位置（只有在成员函数中才有this指针的位置）</li>
</ul>
<h3 id="和-的优先级">“=”和“&lt;=” 的优先级</h3>
<p>1.(   (file_got_len = recv_str(sock,buf,BUF_SIZE) )    &lt;= 0)</p>
<p>2.(     file_got_len = recv_str(sock,buf,BUF_SIZE) &lt;= 0   )</p>
<p>第二种情况下，当recv_str()函数成功返回发送字符串的时候，尽管会成功返回发送字节数大于0，</p>
<p>但是，file_got_len只会返回0，</p>
<p>因为“&lt;=”的优先级大于“=”。</p>
<p>所以在多语句写在一起时，最好用（） 明示！！</p>
<h3 id="运算操作符">运算操作符</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">int i,t;
</span></span><span class="line"><span class="cl">t = (i=1)+(++i);
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出
<code>t= 4 </code></p>
<p>i首先被赋值1，随后++i，使i的值变为2，到做加法的操作的时候，两个操作数都要读i此时的值，结果是两个2相加，等于4.</p>
<p>其汇编程序（基于vs2010），如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">int i,t;
</span></span><span class="line"><span class="cl">t = (i=1)+(++i);
</span></span><span class="line"><span class="cl">011413FE  mov         dword ptr [i],1
</span></span><span class="line"><span class="cl">01141405  mov         eax,dword ptr [i]
</span></span><span class="line"><span class="cl">01141408  add         eax,1
</span></span><span class="line"><span class="cl">0114140B  mov         dword ptr [i],eax
</span></span><span class="line"><span class="cl">0114140E  mov         ecx,dword ptr [i]
</span></span><span class="line"><span class="cl">01141411  add         ecx,dword ptr [i]
</span></span><span class="line"><span class="cl">01141414  mov         dword ptr [t],ecx
</span></span></code></pre></td></tr></table>
</div>
</div><p>i自加后，只保留在eax 寄存器里，然后将eax的2赋给i，所以，i 就变成2了。此处和动态语言的引用似乎有所类似。</p>
<h3 id="sizeof操作符与数组">sizeof操作符与数组</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">int t,tt,num;
</span></span><span class="line"><span class="cl">int array[5];
</span></span><span class="line"><span class="cl">int *p = array;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">t= sizeof(p); //t =4
</span></span><span class="line"><span class="cl">t= sizeof(int [5]);     // t= 20
</span></span><span class="line"><span class="cl">tt = sizeof(array);     // tt = 20
</span></span><span class="line"><span class="cl">num = sizeof(array)/sizeof(array[0]);  // get the number of array .  num =5
</span></span></code></pre></td></tr></table>
</div>
</div><p>开始自以为，数组名不是首地址嘛。 应该是一个指针，然后对指针sizeof ，应该是4
个字节才对，<strong>为什么呢？</strong></p>
<p>此时<strong>sizeof的是整个数组，而非首指针</strong>。
要学会多查看<a href="https://msdn.microsoft.com/en-us/library/0w557fh7.aspx">MSDN</a>，解释如下：</p>
<blockquote>
<p>When you apply the sizeof operator to an array identifier, the result is the size of the entire array rather than the size of the pointer represented by the array identifier.</p>
</blockquote>
<hr>
<p>参考：</p>
<p>程序员面试宝典（第五版）</p>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">fooweel</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2016-08-30
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/c&#43;&#43;/">C&#43;&#43;</a>
          <a href="/tags/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/">编程基础</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/dl_server_ubuntu14_cuda8_gtx1080/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">DL服务器主机环境配置 ubuntu14.04 &amp;&amp; Cuda8.0</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/pybrain_example_nfq_code_flow/">
            <span class="next-text nav-default">PyBrain库的example之NFQ流程图分析</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:wells217@163.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/tmhm" class="iconfont icon-github" title="github"></a>
  <a href="" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span>fooweel</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
